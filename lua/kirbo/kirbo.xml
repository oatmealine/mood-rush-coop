<Mods LoadCommand="%xero(function(self)
	-- hello yes, i'm dumping all the stuff i used, mom, dont look ~Kirby
	local sqrt = math.sqrt
	local sin = math.sin
	local cos = math.cos
	local pow = math.pow
	local exp = math.exp
	local pi = math.pi
	local abs = math.abs
	local kick_cache = {}
	
	local function kick(amt)
		kick_cache[amt] = kick_cache[amt] or function(t)
			return (sqrt(t) * pow(1 - t, amt)) * (2.5 + amt * .6)
		end
		return kick_cache[amt]
	end
	
	local function square(t) return t == 1 and 0 or 1 end
	
	local m_ea, mm = ease, func
	
	--[[
	lists of eases that can be used:
	(Persistent)
		instant				linear
		inQuad				outQuad			inOutQuad			inCubic			outCubic
		inOutCubic			inQuart			outQuart			inOutQuart		inQuint
		outQuint			inOutQuint		inExpo				outExpo			inOutExpo
		inBack				outBack			inOutBack			inElastic		outElastic	
		inOutElastic		inBounce		outBounce			inOutBounce		inSine
		outSine				inOutSine
	
	(Transient)
		bounce			bell			pop				pulse
		tap				tri				spike			inverse		impulse[amt]
		popElastic[damping_factor][oscillation_speed]	tapElastic[damping_factor][oscillation_speed]
		pulseElastic[damping_factor][oscillation_speed]	kick(amt)	square
	]]
	
	plr = {1,2,3}
	
	m_ea{0, 0, instant, 100, 'stealth'}
	{0, 1, outExpo, 100, 'dark', 100, 'halgun'}
	{0, 1, kick(4), -500, 'tiny'}
	{0, 0, instant, 100, 'hide', 100, 'hidenoteflash', plr = 3}
	
	{2, 0, instant, 100, 'spiralholds', 700, 'zoomz'}
	
	{4, 0, instant, 0, 'stealth', 0, 'dark'}
	{4, 12, outQuad, -25, 'rotationx', 30, 'zoom', mode = 'end'}
	{4, 20, linear, 70*(19-4), 'rotationz', mode = 'end'}
	
	{12, 8, outQuad, 100, 'zoom', 0, 'rotationx'}
	
	{20, 8, inQuart, -180*8, 'rotationz', -.85, 'nyoom', 50, 'zoom', 100, 'longholds', 1337, 'zoomz'}
	
	{28, 1, outExpo, 100, 'stealth', 100, 'dark'}
	{28, 1, kick(4), -500, 'tiny'}
	
	{32, 0, instant, 0, 'dpad_setup', 0, 'rotationz', 0, 'confusionoffset', 100, 'zoomz', 100, 'zoom', 0, 'longholds', 0, 'nyoom'}
	
	-- haha point one
	{36.1, 0, instant, 0, 'stealth', 0, 'dark', 0, 'flip', 0, 'movex0', 0, 'movey1', 0, 'movey2', 0, 'movex3', 0, 'reverse2', 0, 'spiralholds'}
	
	{42.5, 1, bounce, 2, 'stretchy'}
	
	{50.5, 1, bounce, 2, 'stretchx'}
	
	{63, 0, instant, 0, 'hide', plr = {1, 2}}
	
	{65, 2, linear, 1337, 'movex1', 1337, 'movex3', plr = 1}
	{65, 2, linear, -1337, 'movex0', -1337, 'movex2', plr = 2}
	
	{96, 0, instant, 0, 'movex0', 0, 'movex1', 0, 'movex2', 0, 'movex3'}
	
	{100, 3, outQuad, 500, 'drunk', 500, 'tipsy', 100, 'stealth', 75, 'dark', 100, 'confusion', plr = 1}
	{100, 3, outQuad, -500, 'drunk', -500, 'tipsy', 100, 'stealth', 75, 'dark', -100, 'confusion', plr = 2}
	{100, 5, tri, -400, 'tiny'}
	{100, 10, outQuad, 50, 'flip', 100, 'centered', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'spiralholds', 100, 'reverse1', 600, 'dpad_setup2', -50, 'drawsize', -100, 'drawsizeback'}
	{100, 16, outQuad, 180*14, 'rotationz'}
	
	{110, 5, outQuad, 0, 'drunk', 0, 'tipsy', 0, 'dark', 0, 'stealth', 0, 'confusion', 1.25, 'xmod', 700, 'zoomz'}
	
	{116, 0, instant, 0, 'rotationz'}
	{116, 123, linear, -90*(123-116), 'rotationz', mode = 'end'}
	
	{123, 1, linear, 0, 'rotationz', 600, 'dpad_setup', -100, 'movex0', 100, 'movey1', -100, 'movey2', 100, 'movex3', 0, 'reverse1', 100, 'reverse2', 0, 'drawsize'}
	{123, 1, kick(2), 0.75, 'noize'}
	
	{124, 131, linear, 90*(131-124), 'rotationz', mode = 'end'}
	
	{131, 1, linear, 0, 'rotationz', 600, 'dpad_setup2', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'reverse1', 0, 'reverse2', -50, 'drawsize'}
	{131, 1, kick(2), 0.75, 'noize'}
	
	{132, 144, linear, -90*(144-132), 'rotationz', mode = 'end'}
	
	{139, 1, kick(2), 0.75, 'noize'}
	
	{144, 4, linear, 0, 'rotationz', 600, 'dpad_setup', -100, 'movex0', 100, 'movey1', -100, 'movey2', 100, 'movex3', 0, 'reverse1', 100, 'reverse2', 0, 'drawsize'}
	{144, 4, kick(2), 1.5, 'noize'}
	
	{148, 162.5, linear, 90*(162.5-148), 'rotationz', mode = 'end'}
	
	{162.5, 1, linear, 0, 'rotationz', 600, 'dpad_setup2', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'reverse1', 0, 'reverse2', -50, 'drawsize'}
	{162.5, 1, kick(2), 0.75, 'noize'}
	
	{163, 172, linear, -90*(172-164), 'rotationz', mode = 'end'}
	
	{176, 4, outQuad, 0, 'rotationz', 0, 'confusionoffset', 0, 'dpad_setup2', 0, 'movex0', 0, 'movey1', 0, 'movey2', 0, 'movex3', 0, 'reverse1', 0, 'drawsize', 0, 'flip', 0, 'centered', 1.85, 'xmod', 100, 'zoom', 100, 'zoomz'}
	{176, 2, outQuad, 169, 'magnitude'}
	{176, 4, kick(2), 1.25, 'noize'}
	
	{178, 2, outQuad, 0, 'magnitude'}
	
	{208, 3, outQuad, 120, 'flip', -120, 'invert'}
	
	{220, 4, outQuad, 120, 'invert', -10, 'flip'}
	
	{228, 4, outQuad, 120, 'flip', 0, 'invert'}
	
	{236, 4, outQuad, 0, 'flip'}
	
	{340, 0, instant, -200, 'centered'}
	{340, 31, linear, 80*31, 'rotationx'}
	
	{370, 0, instant, 300, 'drawsize', 50, 'shrinklineary'}
	
	{372, 400, linear, 90*(400-372), 'rotationy', mode = 'end'}
	
	{396, 404, outQuad, -69, 'mini', 360, 'centered', .69, 'xmod', mode = 'end'}
	
	{400, 0, instant, 0, 'hide', plr = 3}
	{400, 0, instant, 100, 'stealth', plr = {1, 2}}
	{400, 0, instant, 0, 'rotationy', 0, 'confusionoffset'}
	
	{402, 0, instant, 0, 'stealth', plr = {1, 2}}
	
	{404, 1, kick(6), 800, 'centered', -1337, 'tinyx'}
	{404, 6, linear, 0, 'zoom', 90*6, 'rotationy', -1, 'nyoom'}
	
	{405, 0, instant, 100, 'disablemines'}
	
	wiggle(116, 172-116, 8, outQuad, -15, 'rotationx')
	
	wiggle0(116, 172-116, 16, inQuad, -15, 'zoom')
	
	switcheroo(96, .5, outExpo, 'flip')
	
	switcheroo(97, .5, outExpo, 'invert')
	switcheroo(97.5, .5, outExpo, 'urld')
	switcheroo(98, .5, outExpo, 'ludr')
	switcheroo(98.5, .5, outExpo, 'reset')
	
	for beat=2,4,.125 do
		add{beat, 0, instant, 50/17, 'flip', 100/17, 'centered', -100/17, 'movex0', 100/17, 'movey1', -100/17, 'movey2', 100/17, 'movex3', 100/17, 'reverse2', 600/17, 'dpad_setup', -.55/17, 'xmod'}
		-- print(beat)
	end
	
	for beat=34,36,.25 do
		add{beat, 0, instant, (sw/4)/8, 'moveVal', -50/9, 'flip', -100/9, 'centered', 100/9, 'movex0', -100/9, 'movey1', 100/9, 'movey2', -100/9, 'movex3', -100/9, 'reverse2', .5/9, 'xmod'}
	end
	
	for beat=36,62,1 do
		local plr = math.mod(beat, 2) + 1
		local plr2 = math.mod(beat - 1, 2) + 1
		m_ea{beat, 0, instant, 100, 'hide', plr = plr}
		{beat, 0, instant, 0, 'hide', plr = plr2}
	end
	
	for beat=102,115,.25 do
		m_ea{beat, .125, square, 100, 'dark'}
	end
	
	for beat=370,372,.125 do
		add{beat, 0, instant, 25/17, 'flip', -25/17, 'invert', -100/17, 'movez1', 100/17, 'movez2', 7/17, 'xmod', 160/17, 'mini', -2570/17, 'rotationx', 157/17, 'confusionxoffset', 200/17, 'centered'}
		-- print(beat)
	end
	
	for beat=402,404,.25 do
		m_ea{beat, .145, square, 100, 'stealth', plr = 3}
	end
	
	local fuck_appr = {{2, 4}, {34, 36}}
	
	for i,v in pairs(fuck_appr) do
		for beat=v[1],v[2],.25 do
			m_ea{beat, .125, square, 0, 'stealth', 0, 'dark'}
		end
	end
	
	local fuck_appr2 = {{13, 20}, {116, 123}, {124, 131}, {132, 138}, {148, 162}, {163, 172}, {250, 252}, {306, 308}, {370, 372}}
	
	for i,v in pairs(fuck_appr2) do
		for beat=v[1],v[2],.25 do
			m_ea{beat, .145, square, 100, 'hide'}
		end
	end
	
	local fuck_psy = {{4.5, 28}, {116.5, 123}, {124.5, 131}, {132.5, 144}, {148.5, 162}, {163.5, 172}, {341.5, 347}, {348.5, 354}, {356.5, 368}, {372.5, 400}}
	
	for i,v in pairs(fuck_psy) do
		for beat=v[1],v[2],.25 do
			local column = math.mod(beat * 4, 4)
			m_ea{beat, 1, kick(6), 65, 'arrowpath'..column..''}
			-- print(column)
		end
	end
	
	for i = 1,table.getn(fuck_brrahh) do
		local beat = fuck_brrahh[i]
		m_ea{beat[1], 1, kick(8), -600, 'tiny', .5, 'brrr'}
	end
	
	local fuck_boop = {{340, 346}, {348, 353}, {356, 371}}
	
	for i,v in pairs(fuck_boop) do
		for beat=v[1],v[2] do
			m_ea{beat, 1, kick(6), -300, 'tiny'}
		end
	end
	
	local fuck_poof = (P[1] or P[2]):GetNoteData(4, 24)
	
	for i = 1,table.getn(fuck_poof) do
		local beat = fuck_poof[i]
		m_ea{beat[1], 1, kick(4), -500, 'tiny'}
	end
	
	local fuck_poof2 = (P[1] or P[2]):GetNoteData(116, 172)
	
	for i = 1,table.getn(fuck_poof2) do
		local beat = fuck_poof2[i]
		m_ea{beat[1], 1, kick(6), -500, 'tiny'}
	end
	
	local fuck_poof3 = (P[1] or P[2]):GetNoteData(372, 400)
	
	for i = 1,table.getn(fuck_poof3) do
		local beat = fuck_poof3[i]
		m_ea{beat[1], 1, kick(6), -500, 'tiny', 1, 'noize'}
	end
	
	-- mm {{beat [, len [, mode = 'end']], function(beat, poptions) ... end [, defer = true]}
	-- can be used as perframe or mod_action
	
	mm{0, function(beat)
		for pn = 1, max_pn do
	        P[pn]:x(scx)
	        P[pn]:GetChild('Judgment'):hidden(1)
			P[pn]:GetChild('Combo'):hidden(1)
	    end
		
		if P[3] then
			P[3]:SetAwake(true)
			P[3]:SetNoteDataFromLua(fuck_p3)
		end
		
		MESSAGEMAN:Broadcast('ShowEye')
	end}
	{0, 404, function(beat, mods)
		for pn = 1, 3 do
			proxy.notefield[pn]:x(P[pn]:GetX())
		end
	end, mode = 'end'}
	{4, 28, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = -100*math.rad(mods[pn].rotationz)
		end
	end, mode = 'end'}
	{34, 2, function(beat, mods)
		if P[1] then
			P[1]:x(scx - mods[1].moveVal)
		end
		
		if P[2] then
			P[2]:x(scx + mods[2].moveVal)
		end
	end}
	{36, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:pulse()
			proxy.notefield[pn]:effectmagnitude(0, 1.25, 0)
			proxy.notefield[pn]:effectclock('bgm')
			proxy.notefield[pn]:effectperiod(1)
		end
		
		MESSAGEMAN:Broadcast('HideEye')
		MESSAGEMAN:Broadcast('ShowHori')
	end}
	{49, function(beat)
		for pn = 1, 2 do
			P[pn]:x(scx)
			proxy.notefield[pn]:effectperiod(.5)
		end
	end}
	{50, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:effectperiod(1)
		end
		
		if P[1] then
			P[1]:x(sw/4)
		end
		
		if P[2] then
			P[2]:x(sw*3/4)
		end
	end}
	{60, 4, function(beat, mods)
		for pn = 1, 2 do
			mods[pn].alternate = math.sin(beat*math.pi) * 20
			mods[pn].reverse = math.sin(beat*math.pi) * -10
			mods[pn].invert = -math.cos(beat*math.pi) * 50 + 50
		end
	end}
	{65, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:stopeffect()
		end
	end}
	{65, function(beat)
		for pn = 1, max_pn do
	        P[pn]:linear(.5)
	        P[pn]:x(scx)
	    end
	end}
	{68, function(beat)
		if proxy.notefield[1] then
			proxy.notefield[1]:bob()
			proxy.notefield[1]:effectmagnitude(0, 0, 420)
			proxy.notefield[1]:effectclock('bgm')
			proxy.notefield[1]:effectperiod(2)
		end
		
		if proxy.notefield[2] then
			proxy.notefield[2]:bob()
			proxy.notefield[2]:effectmagnitude(0, 0, -420)
			proxy.notefield[2]:effectclock('bgm')
			proxy.notefield[2]:effectperiod(2)
		end
	end}
	{74, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:stopeffect()
		end
	end}
	{76, function(beat)
		if proxy.notefield[1] then
			proxy.notefield[1]:bob()
			proxy.notefield[1]:effectmagnitude(0, 0, -420)
			proxy.notefield[1]:effectclock('bgm')
			proxy.notefield[1]:effectperiod(2)
		end
		
		if proxy.notefield[2] then
			proxy.notefield[2]:bob()
			proxy.notefield[2]:effectmagnitude(0, 0, 420)
			proxy.notefield[2]:effectclock('bgm')
			proxy.notefield[2]:effectperiod(2)
		end
	end}
	{82, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:stopeffect()
		end
	end}
	{84, function(beat)
		if proxy.notefield[1] then
			proxy.notefield[1]:bob()
			proxy.notefield[1]:effectmagnitude(0, 0, 420)
			proxy.notefield[1]:effectclock('bgm')
			proxy.notefield[1]:effectperiod(2)
		end
		
		if proxy.notefield[2] then
			proxy.notefield[2]:bob()
			proxy.notefield[2]:effectmagnitude(0, 0, -420)
			proxy.notefield[2]:effectclock('bgm')
			proxy.notefield[2]:effectperiod(2)
		end
	end}
	{96, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:stopeffect()
		end
	end}
	{100, function(beat)		
		MESSAGEMAN:Broadcast('HideHori')
		MESSAGEMAN:Broadcast('ShowPost')
	end}
	{116, 172, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = -100*math.rad(mods[pn].rotationz)
		end
	end, mode = 'end'}
	{176, function(beat)
		for pn = 1, 2 do
	        proxy.notefield[pn]:vibrate()
	    end
	end}
	{180, function(beat)
		MESSAGEMAN:Broadcast('HidePost')
	end}
	{340, function(beat)
		for pn = 1, 2 do
			local sideGuide = (pn == 2) and 0.75 or 0.25;
			proxy.notefield[pn]:x(sideGuide * sw);
			
		local sideSign = (pn == 2) and 1 or -1;
			for px = 1, 2 do
				proxy.notefield[pn]:xy(sw/2, sh * 1.25 - 30)
				proxy.notefield[pn]:rotationx(180 * (2 * px - pn) / px)
				proxy.notefield[pn]:rotationz(10 * sideSign)
			end
	    end
	end}
	{370, function(beat)
		for pn = 1, 2 do
			proxy.notefield[pn]:decelerate(.5)
			proxy.notefield[pn]:xy(scx, scy)
			proxy.notefield[pn]:rotationx(0)
			proxy.notefield[pn]:rotationz(0)
	    end
	end}
	{372, function(beat)
		MESSAGEMAN:Broadcast('ShowPost')
	end}
	{372, 400, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = 100*math.rad(mods[pn].rotationy)
		end
	end, mode = 'end'}
	{400, function(beat)
		if P[3] then
			P[3]:hidden(0)
		end
		
		MESSAGEMAN:Broadcast('ShowEye')
	end}
	
	
	-- alias (name [, effect])
	-- Adds a new ease variable. Takes in the name of the ease variable, and an optional function.
	-- example, alias('blacksphere')
	
	alias('moveVal')
	
	alias('dpad_setup', function(percent)
		for pn = 1, max_pn do
			P[pn]:SetXSpline(1,0,-percent,600,-1)
			P[pn]:SetXSpline(1,3,percent,600,-1)
			P[pn]:SetYSpline(1,0,-percent,600,-1)
			P[pn]:SetYSpline(1,3,-percent,600,-1)
		end
	end)
	
	alias('dpad_setup2', function(percent)
		for pn = 1, max_pn do
			P[pn]:SetXSpline(1,0,percent,600,-1)
			P[pn]:SetXSpline(1,3,-percent,600,-1)
			P[pn]:SetYSpline(1,0,-percent,600,-1)
			P[pn]:SetYSpline(1,3,-percent,600,-1)
		end
	end)
	
	alias('nyoom', function(percent)
		fuck_fisheye:GetShader():uniform1f('amount', percent)
	end)
	
	alias('magnitude', function(percent)
		for pn = 1, 2 do
			proxy.notefield[pn]:effectmagnitude(percent, percent, percent)
		end
	end)
	
	alias('noize', function(percent)
		fuck_post:GetShader():uniform1f('glitchAmp', percent/5)
		fuck_post:GetShader():uniform1f('hnoise', percent/5)
	end)
	
	alias('brrr', function(percent)
		fuck_horizon:GetShader():uniform1f('amp', percent)
	end)
	
	alias('stretchx', function(percent)
		local screen = SCREENMAN:GetTopScreen();
		screen:x(-scx*percent)
		screen:zoomx(percent + 1)
	end)
	
	alias('stretchy', function(percent)
		local screen = SCREENMAN:GetTopScreen();
		screen:y(-scy*percent)
		screen:zoomy(percent + 1)
	end)
	
	
	-- spellcard {beat, length, color = {r, g, b, a}, name = name, difficulty = diffnum [, mode = 'end']}
	-- let's you add spellcards to a chart.
	-- `color`, `name`, and `difficulty` are all optional.
	spellcard{0, 28, color = {.5, 0, 0, 1}, name = 'did anyone order a d-pad?'}
	spellcard{36, 96, color = {0, 1, 0, 1}, name = 'lesson learned, dont fuck with the baddest', mode = 'end'}
	spellcard{100, 176, color = {.75, 0, 0, 1}, name = 'sike, have another d-pad', mode = 'end'}
	spellcard{372, 400, color = {1, 0, 0, 1}, name = 'd-pad, electric tripleloo', mode = 'end'}
	spellcard{402, 404, color = {0, 0, 1, 1}, name = 'yeah, hit that quad, its good', mode = 'end'}
	
	
end)"
	Type = "ActorFrame"
><children>

<Layer File="chart2lua" />

</children></Mods>
