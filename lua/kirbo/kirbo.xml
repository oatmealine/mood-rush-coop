<Mods LoadCommand="%xero(function(self)
	-- hello yes, i'm dumping all the stuff i used, mom, dont look ~Kirby
	local sqrt = math.sqrt
	local sin = math.sin
	local cos = math.cos
	local pow = math.pow
	local exp = math.exp
	local pi = math.pi
	local abs = math.abs
	local kick_cache = {}
	
	local function kick(amt)
		kick_cache[amt] = kick_cache[amt] or function(t)
			return (sqrt(t) * pow(1 - t, amt)) * (2.5 + amt * .6)
		end
		return kick_cache[amt]
	end
	
	local function square(t) return t == 1 and 0 or 1 end
	
	local m_ea, mm = ease, func
	
	--[[
	lists of eases that can be used:
	(Persistent)
		instant				linear
		inQuad				outQuad			inOutQuad			inCubic			outCubic
		inOutCubic			inQuart			outQuart			inOutQuart		inQuint
		outQuint			inOutQuint		inExpo				outExpo			inOutExpo
		inBack				outBack			inOutBack			inElastic		outElastic	
		inOutElastic		inBounce		outBounce			inOutBounce		inSine
		outSine				inOutSine
	
	(Transient)
		bounce			bell			pop				pulse
		tap				tri				spike			inverse		impulse[amt]
		popElastic[damping_factor][oscillation_speed]	tapElastic[damping_factor][oscillation_speed]
		pulseElastic[damping_factor][oscillation_speed]	kick(amt)	square
	]]
	
	m_ea{0, 1, outExpo, 100, 'dark', 100, 'stealth', 100, 'halgun'}
	{0, 1, kick(4), -500, 'tiny'}
	
	{2, 0, instant, 100, 'spiralholds', 700, 'zoomz'}
	
	{4, 0, instant, 0, 'stealth', 0, 'dark'}
	{4, 12, outQuad, -25, 'rotationx', 30, 'zoom', mode = 'end'}
	{4, 20, linear, 70*(19-4), 'rotationz', mode = 'end'}
	
	{12, 8, outQuad, 100, 'zoom', 0, 'rotationx'}
	
	{20, 8, inQuad, -180*8, 'rotationz', -.85, 'nyoom', 75, 'mini', 100, 'longholds', 1337, 'zoomz'}
	
	{28, 1, outExpo, 100, 'stealth', 100, 'dark'}
	{28, 1, kick(4), -500, 'tiny'}
	
	{32, 0, instant, 0, 'dpad_setup', 0, 'rotationz', 0, 'confusionoffset', 100, 'zoomz', 0, 'mini', 0, 'longholds', 0, 'nyoom'}
	
	-- haha point one
	{36.1, 0, instant, 0, 'stealth', 0, 'dark', 0, 'flip', 0, 'centered', 0, 'movex0', 0, 'movey1', 0, 'movey2', 0, 'movex3', 0, 'reverse2', 0, 'spiralholds'}
	
	{100, 3, outQuad, 500, 'drunk', 500, 'tipsy', 100, 'stealth', 75, 'dark', 100, 'confusion', plr = 1}
	{100, 3, outQuad, -500, 'drunk', -500, 'tipsy', 100, 'stealth', 75, 'dark', -100, 'confusion', plr = 2}
	{100, 5, tri, -400, 'tiny'}
	{100, 10, outQuad, 50, 'flip', 100, 'centered', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'spiralholds', 100, 'reverse1', 600, 'dpad_setup2', -50, 'drawsize', -100, 'drawsizeback'}
	{100, 16, outQuad, 180*14, 'rotationz'}
	
	{110, 5, outQuad, 0, 'drunk', 0, 'tipsy', 0, 'dark', 0, 'stealth', 0, 'confusion', 1.35, 'xmod', 700, 'zoomz'}
	
	{116, 0, instant, 0, 'rotationz'}
	{116, 123, linear, -90*(123-116), 'rotationz', mode = 'end'}
	
	{123, 1, linear, 0, 'rotationz', 600, 'dpad_setup', -100, 'movex0', 100, 'movey1', -100, 'movey2', 100, 'movex3', 0, 'reverse1', 100, 'reverse2', 0, 'drawsize'}
	{123, 1, kick(2), 0.75, 'noize'}
	
	{124, 131, linear, 90*(131-124), 'rotationz', mode = 'end'}
	
	{131, 1, linear, 0, 'rotationz', 600, 'dpad_setup2', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'reverse1', 0, 'reverse2', -50, 'drawsize'}
	{131, 1, kick(2), 0.75, 'noize'}
	
	{132, 144, linear, -90*(144-132), 'rotationz', mode = 'end'}
	
	{139, 1, kick(2), 0.75, 'noize'}
	
	{144, 4, linear, 0, 'rotationz', 600, 'dpad_setup', -100, 'movex0', 100, 'movey1', -100, 'movey2', 100, 'movex3', 0, 'reverse1', 100, 'reverse2', 0, 'drawsize'}
	{144, 4, kick(2), 1.5, 'noize'}
	
	{148, 162.5, linear, 90*(162.5-148), 'rotationz', mode = 'end'}
	
	{162.5, 1, linear, 0, 'rotationz', 600, 'dpad_setup2', -300, 'movex0', 300, 'movey1', -300, 'movey2', 300, 'movex3', 100, 'reverse1', 0, 'reverse2', -50, 'drawsize'}
	{162.5, 1, kick(2), 0.75, 'noize'}
	
	{163, 172, linear, -90*(172-164), 'rotationz', mode = 'end'}
	
	{176, 4, outQuad, 0, 'rotationz', 0, 'confusionoffset', 0, 'dpad_setup2', 0, 'movex0', 0, 'movey1', 0, 'movey2', 0, 'movex3', 0, 'reverse1', 0, 'drawsize', 0, 'flip', 0, 'centered', 1.85, 'xmod', 100, 'zoom', 100, 'zoomz'}
	{176, 2, outQuad, 169, 'magnitude'}
	{176, 4, kick(2), 1.25, 'noize'}
	
	{178, 2, outQuad, 0, 'magnitude'}
	
	{370, 0, instant, 300, 'drawsize', 50, 'shrinklineary'}
	
	{372, 400, linear, 90*(400-372), 'rotationy', mode = 'end'}
	
	wiggle(116, 172-116, 8, outQuad, -15, 'rotationx')
	
	wiggle0(116, 172-116, 16, inQuad, -15, 'zoom')
	
	for beat=2,4,.125 do
		add{beat, 0, instant, 50/17, 'flip', 100/17, 'centered', -100/17, 'movex0', 100/17, 'movey1', -100/17, 'movey2', 100/17, 'movex3', 100/17, 'reverse2', 600/17, 'dpad_setup', -.5/17, 'xmod'}
		-- print(beat)
	end
	
	for beat=34,36,.25 do
		add{beat, 0, instant, (sw/4)/8, 'moveVal', -50/9, 'flip', -100/9, 'centered', 100/9, 'movex0', -100/9, 'movey1', 100/9, 'movey2', -100/9, 'movex3', -100/9, 'reverse2', .5/9, 'xmod'}
	end
	
	for beat=102,115,.25 do
		m_ea{beat, .125, square, 100, 'dark'}
	end
	
	--7, 'xmod', 130, 'mini', -80, 'rotationx', 140, 'confusionxoffset',
	
	for beat=370,372,.125 do
		add{beat, 0, instant, 25/17, 'flip', -25/17, 'invert', -100/17, 'movez1', 100/17, 'movez2', 7/17, 'xmod', 160/17, 'mini', -90/17, 'rotationx', 157/17, 'confusionxoffset'}
		-- print(beat)
	end
	
	local fuck_appr = {{2, 4}, {34, 36}}
	
	for i,v in pairs(fuck_appr) do
		for beat=v[1],v[2],.25 do
			m_ea{beat, .125, square, 0, 'stealth', 0, 'dark'}
		end
	end
	
	local fuck_appr2 = {{13, 20}, {116, 123}, {124, 131}, {132, 138}, {148, 162}, {163, 172}, {370, 372}, {402, 404}}
	
	for i,v in pairs(fuck_appr2) do
		for beat=v[1],v[2],.25 do
			m_ea{beat, .145, square, 100, 'hide'}
		end
	end
	
	local fuck_poof = (P[1] or P[2]):GetNoteData(4, 24)
	
	for i = 1,table.getn(fuck_poof) do
		local beat = fuck_poof[i]
		m_ea{beat[1], 1, kick(4), -500, 'tiny'}
	end
	
	local fuck_poof2 = (P[1] or P[2]):GetNoteData(116, 172)
	
	for i = 1,table.getn(fuck_poof2) do
		local beat = fuck_poof2[i]
		m_ea{beat[1], 1, kick(6), -500, 'tiny'}
	end
	
	local fuck_poof3 = (P[1] or P[2]):GetNoteData(372, 400)
	
	for i = 1,table.getn(fuck_poof3) do
		local beat = fuck_poof3[i]
		m_ea{beat[1], 1, kick(6), -500, 'tiny'}
	end
	
	-- mm {{beat [, len [, mode = 'end']], function(beat, poptions) ... end [, defer = true]}
	-- can be used as perframe or mod_action
	
	mm{0, function(beat)
		for pn = 1, max_pn do
	        P[pn]:x(scx)
	        P[pn]:GetChild('Judgment'):hidden(1)
			P[pn]:GetChild('Combo'):hidden(1)
	    end
		
		MESSAGEMAN:Broadcast('ShowEye')
	end}
	{0, 404, function(beat, mods)
		for pn = 1, 2 do
			proxy.notefield[pn]:x(P[pn]:GetX())
		end
	end, mode = 'end'}
	{4, 28, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = -100*math.rad(mods[pn].rotationz)
		end
	end, mode = 'end'}
	{34, 2, function(beat, mods)
		if P[1] then
			P[1]:x(scx - mods[1].moveVal)
		end
		
		if P[2] then
			P[2]:x(scx + mods[2].moveVal)
		end
	end}
	{100, function(beat)
		for pn = 1, max_pn do
	        P[pn]:linear(5)
	        P[pn]:x(scx)
	    end
		
		MESSAGEMAN:Broadcast('HideEye')
		MESSAGEMAN:Broadcast('ShowPost')
	end}
	{116, 172, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = -100*math.rad(mods[pn].rotationz)
		end
	end, mode = 'end'}
	{176, function(beat)
		for pn = 1, 2 do
	        proxy.notefield[pn]:vibrate()
	    end
	end}
	{372, 400, function(beat, mods)	
		for pn = 1, max_pn do
			-- rotationz has counteracting confusionoffset
			mods[pn].confusionoffset = 100*math.rad(mods[pn].rotationy)
		end
	end, mode = 'end'}
	
	
	-- alias (name [, effect])
	-- Adds a new ease variable. Takes in the name of the ease variable, and an optional function.
	-- example, alias('blacksphere')
	
	alias('moveVal')
	
	alias('dpad_setup', function(percent)
		for pn = 1, max_pn do
			P[pn]:SetXSpline(1,0,-percent,600,-1)
			P[pn]:SetXSpline(1,3,percent,600,-1)
			P[pn]:SetYSpline(1,0,-percent,600,-1)
			P[pn]:SetYSpline(1,3,-percent,600,-1)
		end
	end)
	
	alias('dpad_setup2', function(percent)
		for pn = 1, max_pn do
			P[pn]:SetXSpline(1,0,percent,600,-1)
			P[pn]:SetXSpline(1,3,-percent,600,-1)
			P[pn]:SetYSpline(1,0,-percent,600,-1)
			P[pn]:SetYSpline(1,3,-percent,600,-1)
		end
	end)
	
	alias('nyoom', function(percent)
		fuck_fisheye:GetShader():uniform1f('amount', percent)
	end)
	
	alias('magnitude', function(percent)
		for pn = 1, 2 do
			proxy.notefield[pn]:effectmagnitude(percent, percent, percent)
		end
	end)
	
	alias('noize', function(percent)
		fuck_post:GetShader():uniform1f('glitchAmp', percent/5)
		fuck_post:GetShader():uniform1f('hnoise', percent/5)
	end)
	
	
	-- spellcard {beat, length, color = {r, g, b, a}, name = name, difficulty = diffnum [, mode = 'end']}
	-- let's you add spellcards to a chart.
	-- `color`, `name`, and `difficulty` are all optional.
	spellcard{0, 28, color = {.5, 0, 0, 1}, name = 'did anyone order a d-pad?'}
	spellcard{100, 176, color = {.75, 0, 0, 1}, name = 'sike, have another d-pad', mode = 'end'}
	spellcard{372, 400, color = {1, 0, 0, 1}, name = 'd-pad, electric tripleloo', mode = 'end'}
	
	
end)"
	Type = "ActorFrame"
><children>

<Layer File="chart2lua" />

</children></Mods>
